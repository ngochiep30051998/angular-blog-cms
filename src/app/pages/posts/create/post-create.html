<div class="max-w-4xl mx-auto space-y-6">
    <div class="flex items-center justify-between">
        <div>
            <h1 class="text-sm font-bold text-gray-800">Create Post</h1>
            <p class="text-sm text-gray-500">Create a new blog post</p>
        </div>
        <a
            routerLink="/posts"
            class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"
        >
            Back to list
        </a>
    </div>

    <form [formGroup]="form" (ngSubmit)="submit()" class="bg-white rounded-2xl shadow-md border border-gray-100 p-8 space-y-5">
        <div>
            <label for="title" class="block text-sm font-semibold text-gray-700 mb-2">
                Title <span class="text-red-500">*</span>
            </label>
            <input
                id="title"
                type="text"
                formControlName="title"
                (blur)="generateSlug()"
                class="w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-sm"
                [class.border-red-500]="title?.touched && title?.invalid"
                placeholder="Enter post title"
            />
            @if (title?.touched && title?.errors?.['required']) {
                <p class="mt-2 text-sm text-red-600">Title is required.</p>
            }
            @if (title?.touched && title?.errors?.['maxlength']) {
                <p class="mt-2 text-sm text-red-600">Title must be less than 255 characters.</p>
            }
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label for="slug" class="block text-sm font-semibold text-gray-700 mb-2">
                    Slug <span class="text-red-500">*</span>
                </label>
                <input
                    id="slug"
                    type="text"
                    formControlName="slug"
                    class="w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-sm"
                    [class.border-red-500]="slug?.touched && slug?.invalid"
                    placeholder="post-slug-url"
                />
                @if (slug?.touched && slug?.errors?.['required']) {
                    <p class="mt-2 text-sm text-red-600">Slug is required.</p>
                }
                @if (slug?.touched && slug?.errors?.['pattern']) {
                    <p class="mt-2 text-sm text-red-600">Slug must be lowercase with hyphens (e.g., my-post-title).</p>
                }
            </div>
            <div>
                <label for="category_id" class="block text-sm font-semibold text-gray-700 mb-2">Category</label>
                <app-custom-select
                    formControlName="category_id"
                    [options]="categoryOptions()"
                    [placeholder]="'Select a category'"
                    [valueKey]="'_id'"
                    [displayKey]="'name'"
                    [showAvatar]="true"
                ></app-custom-select>
            </div>
        </div>

        <div>
            <label for="excerpt" class="block text-sm font-semibold text-gray-700 mb-2">Excerpt</label>
            <textarea
                id="excerpt"
                formControlName="excerpt"
                rows="3"
                class="w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all resize-none text-sm"
                placeholder="Brief description of the post (optional)"
            ></textarea>
        </div>

        <div>
            <label for="tags" class="block text-sm font-semibold text-gray-700 mb-2">Tags</label>
            <app-tags-input
                formControlName="tags"
                [existingTags]="allTags()"
                placeholder="Add tags (press Enter)"
            ></app-tags-input>
        </div>

        <div>
            <label for="content" class="block text-sm font-semibold text-gray-700 mb-2">
                Content <span class="text-red-500">*</span>
            </label>
            <editor
                formControlName="content"
                [init]="editorConfig"
            ></editor>
            @if (content?.touched && content?.errors?.['required']) {
                <p class="mt-2 text-sm text-red-600">Content is required.</p>
            }
        </div>

        <div class="flex gap-3 pt-4">
            <button
                type="submit"
                [disabled]="form.invalid"
                class="text-white bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-xl text-sm px-4 py-2.5 text-center transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
            >
                Create Post
            </button>
            <button
                type="button"
                routerLink="/posts"
                class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors"
            >
                Cancel
            </button>
        </div>
    </form>
</div>

