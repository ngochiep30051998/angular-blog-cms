<aside [class]="isCollapsed() ? 'w-16 bg-white h-full flex flex-col transition-all duration-300 shadow-sm' : 'w-64 bg-white h-full flex flex-col transition-all duration-300 shadow-sm'">
    <!-- Logo Section -->
    <div [class]="isCollapsed() ? 'px-2 py-5 border-b border-gray-200 flex justify-center' : 'px-6 py-5 border-b border-gray-200'">
        <div class="flex items-center gap-3">
            <div class="w-8 h-8 bg-[#1A202C] rounded flex items-center justify-center flex-shrink-0">
                <div class="grid grid-cols-2 gap-0.5 w-4 h-4">
                    <div class="bg-white rounded-sm"></div>
                    <div class="bg-white rounded-sm"></div>
                    <div class="bg-white rounded-sm"></div>
                    <div class="bg-white rounded-sm"></div>
                </div>
            </div>
            @if (!isCollapsed()) {
                <span class="text-sm font-bold text-[#2D3748] whitespace-nowrap">BLOG CMS</span>
            }
        </div>
    </div>

    <!-- Main Navigation -->
    <nav [class]="isCollapsed() ? 'px-2 py-4 flex-1 overflow-y-auto' : 'px-4 py-4 flex-1 overflow-y-auto'">
        <ul class="space-y-1">
            @for (item of menuItems(); track item.route) {
                <li [class]="isCollapsed() ? 'relative' : ''">
                    <a
                        [routerLink]="item.route"
                        routerLinkActive="router-link-active"
                        [routerLinkActiveOptions]="{ exact: false }"
                        [class]="isCollapsed() ? 'flex items-center justify-center px-2 py-3 rounded-[15px] transition-all duration-200 cursor-pointer text-sm font-bold relative' : 'flex items-center gap-3 px-4 py-3 rounded-[15px] transition-all duration-200 cursor-pointer text-sm font-bold'"
                        (mouseenter)="isCollapsed() && showTooltip($event, item.label)"
                        (mouseleave)="isCollapsed() && hideTooltip()"
                    >
                        <div class="flex-shrink-0 w-[30px] h-[30px] flex items-center justify-center rounded-[12px] menu-icon-wrapper">
                            <img 
                                [src]="item.icon" 
                                [alt]="item.label" 
                                class="w-[15px] h-[15px] menu-icon"
                            />
                        </div>
                        @if (!isCollapsed()) {
                            <span class="whitespace-nowrap menu-text">{{ item.label }}</span>
                        }
                    </a>
                </li>
            }
        </ul>
    </nav>

    <!-- Tooltip (shown when collapsed) -->
    @if (isCollapsed() && tooltipText()) {
        <div 
            class="tooltip"
            [style.left.px]="tooltipPosition().x"
            [style.top.px]="tooltipPosition().y"
        >
            {{ tooltipText() }}
        </div>
    }

    <!-- Collapse Button Section -->
    <div [class]="isCollapsed() ? 'px-2 py-4 border-t border-gray-200' : 'px-4 py-4 border-t border-gray-200'">
        <button
            (click)="toggleCollapse()"
            [class]="isCollapsed() ? 'flex items-center justify-center px-2 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200 cursor-pointer text-[#A0AEC0] text-sm font-bold w-full' : 'flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200 cursor-pointer text-[#A0AEC0] text-sm font-bold w-full'"
            [title]="isCollapsed() ? 'Expand' : 'Collapse'"
        >
            <div 
                [class]="isCollapsed() ? 'w-5 h-5 transform rotate-180' : 'w-5 h-5'"
                [style.mask-image]="'url(assets/images/svgs/collapse.svg)'"
                [style.-webkit-mask-image]="'url(assets/images/svgs/collapse.svg)'"
                style="mask-size: contain; mask-repeat: no-repeat; mask-position: center; -webkit-mask-size: contain; -webkit-mask-repeat: no-repeat; -webkit-mask-position: center; background-color: currentColor;"
            ></div>
            @if (!isCollapsed()) {
                <span>Collapse</span>
            }
        </button>
    </div>
</aside>
