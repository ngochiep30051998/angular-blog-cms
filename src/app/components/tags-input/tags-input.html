<div class="tags-input-container">
    <div class="flex flex-wrap gap-2 p-2 border border-gray-300 rounded-xl focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-blue-500 min-h-[42px]">
        @for (tag of tags; track tag) {
            <span class="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">
                {{ tag }}
                <button
                    type="button"
                    (click)="removeTag(tag)"
                    class="hover:text-blue-900 focus:outline-none"
                    aria-label="Remove tag"
                >
                    <div 
                        class="w-4 h-4"
                        [style.mask-image]="'url(assets/images/svgs/close.svg)'"
                        [style.-webkit-mask-image]="'url(assets/images/svgs/close.svg)'"
                        style="mask-size: contain; mask-repeat: no-repeat; mask-position: center; -webkit-mask-size: contain; -webkit-mask-repeat: no-repeat; -webkit-mask-position: center; background-color: currentColor;"
                    ></div>
                </button>
            </span>
        }
        <input
            type="text"
            [(ngModel)]="inputValue"
            (keydown)="onKeyDown($event)"
            [placeholder]="tags.length === 0 ? placeholder : ''"
            class="flex-1 min-w-[120px] outline-none text-sm px-2 py-1"
        />
    </div>
    @if (existingTags.length > 0) {
        <div class="mt-2">
            <p class="text-xs text-gray-500 mb-1">Existing tags:</p>
            <div class="flex flex-wrap gap-1">
                @for (tag of existingTags; track tag) {
                    @if (!tags.includes(tag)) {
                        <button
                            type="button"
                            (click)="selectExistingTag(tag)"
                            class="px-2 py-1 text-xs text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"
                        >
                            + {{ tag }}
                        </button>
                    }
                }
            </div>
        </div>
    }
</div>

